<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>写文章</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/iconfont/iconfont.css}"/>
    <link rel="stylesheet" th:href="@{/css/app.css}"/>
</head>
<body>
    <div class="z-content">
        <div class="z-card">
            <div class="z-card-header">写文章</div>
            <div class="z-card-body">
                <form class="form-horizontal" id="cloudConfigForm" method = 'post' th:action="@{/upload/saveConfig}">
                    <div class="form-group">
                        <label class="col-sm-3 control-label">类型 :</label>
                        <div class="col-sm-8">
                            <div class="z-radio">
                                <input type="radio" th:field="*{cloudStorageConfig.type}" name="type" value="0" require=""/>
                                <label><i></i>本地</label>
                            </div>
                            <div class="z-radio">
                                <input type="radio" th:field="*{cloudStorageConfig.type}" name="type" value="1" require=""/>
                                <label><i></i>七牛云</label>
                            </div>
                            <div class="z-radio">
                                <input type="radio" th:field="*{cloudStorageConfig.type}" name="type" value="2" require=""/>
                                <label><i></i>阿里云</label>
                            </div>
                            <div class="z-radio">
                                <input type="radio" th:field="*{cloudStorageConfig.type}" name="type" value="3" require=""/>
                                <label><i></i>腾讯云</label>
                            </div>
                        </div>
                    </div>
                    <div id="local-form" th:class="${cloudStorageConfig.type==0?'':'display-none'}">
                        <div class="form-group">
                            <div class="col-sm-3 control-label">文件服务器域名:</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.localDomain}" name="localDomain" placeholder="本地文件服务器域名"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">文件存储路径 :</label>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.localPrefix}" name="localPrefix" require="必填项"  placeholder="本地文件路径前缀">
                            </div>
                        </div>
                    </div>
                    <div id="qiniu-form" th:class="${cloudStorageConfig.type==1?'':'display-none'}">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">域名 :</label>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.qiniuDomain}" name="qiniuDomain" require="必填项"  placeholder="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">前缀 :</label>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.qiniuPrefix}" name="qiniuPrefix" require="必填项"  placeholder="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">AccessKey :</label>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.qiniuAccessKey}" name="qiniuAccessKey" require="必填项"  placeholder="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">SecretKey :</label>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.qiniuSecretKey}" name="qiniuSecretKey" require="必填项"  placeholder="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">空间名 :</label>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.qiniuBucketName}" name="qiniuBucketName" require="必填项"  placeholder="">
                            </div>
                        </div>
                    </div>
                    <div id="ali-form" th:class="${cloudStorageConfig.type==2?'':'display-none'}">
                        <div class="form-group">
                            <div class="col-sm-3 control-label">域名</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.aliyunDomain}" name="aliyunDomain" placeholder="阿里云绑定的域名"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 control-label">路径前缀</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.aliyunPrefix}" name="aliyunPrefix" placeholder="不设置默认为空"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 control-label">EndPoint</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.aliyunEndPoint}" name="aliyunEndPoint" placeholder="阿里云EndPoint"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 control-label">AccessKeyId</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.aliyunAccessKeyId}" name="aliyunAccessKeyId" placeholder="阿里云AccessKeyId"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 control-label">AccessKeySecret</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.aliyunAccessKeySecret}" name="aliyunAccessKeySecret" placeholder="阿里云AccessKeySecret"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 control-label">BucketName</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.aliyunBucketName}" name="aliyunBucketName" placeholder="阿里云BucketName"/>
                            </div>
                        </div>
                    </div>
                    <div id="qcloud-form" th:class="${cloudStorageConfig.type==3?'':'display-none'}">
                        <div class="form-group">
                            <div class="col-sm-3 control-label">域名</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.qcloudDomain}" name="qcloudDomain" placeholder="腾讯云绑定的域名"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 control-label">路径前缀</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.qcloudPrefix}" name="qcloudPrefix" placeholder="不设置默认为空"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 control-label">SecretId</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.qcloudSecretId}" name="qcloudSecretId" placeholder="腾讯云SecretId"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 control-label">SecretKey</div>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.qcloudSecretKey}" name="qcloudSecretKey" placeholder="腾讯云SecretKey"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 control-label">BucketName</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.qcloudBucketName}" name="qcloudBucketName" placeholder="腾讯云BucketName"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 control-label">Bucket所属地区</div>
                            <div class="col-sm-8 col-md-6">
                                <input type="text" class="form-control" th:value="${cloudStorageConfig.qcloudRegion}" name="qcloudRegion" placeholder="如：sh（可选值 ，华南：gz 华北：tj 华东：sh）"/>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-8  col-sm-offset-3">
                            <button id="saveConfig" type="button" class="btn btn-primary">保存</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <script th:src="@{/js/app.js}"></script>
    <script type="text/javascript">
    $(function () {
        $("#saveConfig").on('click', function () {
            App.unmask("#saveConfig");
            App.postAjax("/upload/saveConfig",$("#cloudConfigForm").serialize(),function (data) {
                App.unmask("#saveConfig");
                if(data.status===200){
                    App.msgS(data.msg);
                }else{
                    App.msgE(data.msg);
                }

            })
        });
        $("input[name=type]").on('change', function() {
            var ossType = $(this).val();
            if(ossType==="0"){
                $("#local-form").show();
                $("#qiniu-form").hide();
                $("#ali-form").hide();
                $("#qcloud-form").hide();
            }else if(ossType==="1"){
                $("#local-form").hide();
                $("#qiniu-form").show();
                $("#ali-form").hide();
                $("#qcloud-form").hide();
            }else if(ossType==="2"){
                $("#local-form").hide();
                $("#qiniu-form").hide();
                $("#ali-form").show();
                $("#qcloud-form").hide();
            }else if(ossType==="3"){
                $("#local-form").hide();
                $("#qiniu-form").hide();
                $("#ali-form").hide();
                $("#qcloud-form").show();
            }
        });
    });
</script>


